(function(){angular.module("geoPusher",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ngMaterial","pusher-angular"]).config(["$stateProvider","$urlRouterProvider",function(e,t){return e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}),t.otherwise("/")}])}).call(this),function(){angular.module("geoPusher").controller("NavbarCtrl",["$scope",function(e){return e.date=new Date}])}.call(this),function(){angular.module("geoPusher").controller("MainCtrl",["$scope","$mdDialog","$pusher",function(e,t,o){var n,a,r,i,u;return e.message={},e.state={pusherSubscription:{active:!1}},a=new Pusher("d69b688d95bbabd3787d",{authEndpoint:"http://127.0.0.1:5000/pusher/auth"}),u=o(a),e.subscribeToLocalRoom=function(){return e.channel=u.subscribe("private-location-"+e.roomName()),e.channel.bind("pusher:subscription_succeeded",function(){return e.state.pusherSubscription.active=!0}),e.channel.bind("client-message-event",e.onMessage)},n=t.alert({title:"Getting your location",content:"You may need to allow GeoLocation. Hit accept at the top of your screen."}),i={zoom:14,center:{lat:51.536208,lng:-.07873}},r=new google.maps.Map(document.getElementById("map-canvas"),i),e.getPositionToDegreeOfAccuracy=function(t){return null==t&&(t=2),{latitude:e.position.coords.latitude.toFixed(t),longitude:e.position.coords.longitude.toFixed(t)}},e.roomName=function(){var t;return t=e.getPositionToDegreeOfAccuracy(1),""+t.latitude+t.longitude},e.shouldShowNewMessageForm=function(){return null==e.position?!1:e.state.pusherSubscription.active?!0:!1},e.post=function(){return e.channel.trigger("client-message-event",{message:e.message.body,position:e.getPositionToDegreeOfAccuracy()})},e.onMessage=function(e){var t,o;return console.log(e),o=new google.maps.LatLng(e.position.latitude,e.position.longitude),t=new google.maps.InfoWindow({map:r,position:o,content:e.message})},navigator.geolocation?(t.show(n),navigator.geolocation.getCurrentPosition(function(o){var n;return e.position=o,t.hide(),e.subscribeToLocalRoom(),n=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),r.setCenter(n)})):void 0}])}.call(this),angular.module("geoPusher").run(["$templateCache",function(e){e.put("app/main/main.html",'<div id="map-canvas"></div><md-card class="form" ng-show="shouldShowNewMessageForm()"><md-card-content><md-input-container flex=""><label>Message</label> <textarea ng-model="message.body" columns="1" md-maxlength="150"></textarea></md-input-container><md-button class="align-right" ng-click="post()">Send</md-button></md-card-content></md-card>'),e.put("components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center" ng-controller="NavbarCtrl"><md-button href="https://github.com/Swiip/generator-gulp-angular">Gulp Angular</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised">Home</md-button><md-button href="#" class="md-raised">About</md-button><md-button href="#" class="md-raised">Contact</md-button></section><md-button href="#">Current date: {{ date | date:\'yyyy-MM-dd\' }}</md-button></md-toolbar>')}]);